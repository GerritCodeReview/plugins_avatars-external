{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "11ba5009_2c9f343e",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/avatars/external/ExternalUrlAvatarProviderTest.java",
        "patchSetId": 1
      },
      "lineNbr": 96,
      "author": {
        "id": 1144862
      },
      "writtenOn": "2022-03-04T08:42:20Z",
      "side": 1,
      "message": "Are these ExternalUrlAvatarProviders changing? I\u0027m not sure but it seems like they would be identical, if so you could use the same avatarProvider in most cases instead of making a new one.",
      "revId": "ae01681cd21bf606f1570761543c813f2794f86f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5743c635_4ac5038c",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/avatars/external/ExternalUrlAvatarProviderTest.java",
        "patchSetId": 1
      },
      "lineNbr": 96,
      "author": {
        "id": 1065256
      },
      "writtenOn": "2022-03-04T08:50:12Z",
      "side": 1,
      "message": "They are. Because the constructor depends on the mocked Gerrit configuration, which changes between tests. See the `when().thenReturn()`-statements.",
      "parentUuid": "11ba5009_2c9f343e",
      "revId": "ae01681cd21bf606f1570761543c813f2794f86f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7e4bf71b_def1d7c6",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/avatars/external/ExternalUrlAvatarProviderTest.java",
        "patchSetId": 1
      },
      "lineNbr": 96,
      "author": {
        "id": 1144862
      },
      "writtenOn": "2022-03-04T08:51:18Z",
      "side": 1,
      "message": "I see, got it.",
      "parentUuid": "5743c635_4ac5038c",
      "revId": "ae01681cd21bf606f1570761543c813f2794f86f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b63c7b97_ecaad3ef",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/avatars/external/ExternalUrlAvatarProviderTest.java",
        "patchSetId": 1
      },
      "lineNbr": 96,
      "author": {
        "id": 1065256
      },
      "writtenOn": "2022-03-04T08:51:19Z",
      "side": 1,
      "message": "But yes, there are some cases where the default is used. Let me add the default to the setup() method.",
      "parentUuid": "5743c635_4ac5038c",
      "revId": "ae01681cd21bf606f1570761543c813f2794f86f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4aa3deb0_4bd677db",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/avatars/external/ExternalUrlAvatarProviderTest.java",
        "patchSetId": 1
      },
      "lineNbr": 96,
      "author": {
        "id": 1003873
      },
      "writtenOn": "2022-03-04T09:23:28Z",
      "side": 1,
      "message": "\u003e Because the constructor depends on the mocked Gerrit configuration, which changes between tests.\n\nThe mocked Gerrit configuration changes but the reference to the mock, which is passed to the constructor, doesn\u0027t change. Therefore, the creation of the avatarProvider can be moved to the setup method.\n\nThe current code anyway first creates the avatarProvider and after that performs additional, test specific, cfg mock configuration. So the order of statements would still be the same when the creation of the avatarProvider is moved to the setup method.",
      "parentUuid": "b63c7b97_ecaad3ef",
      "revId": "ae01681cd21bf606f1570761543c813f2794f86f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0743cc82_319a1aed",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/avatars/external/ExternalUrlAvatarProviderTest.java",
        "patchSetId": 1
      },
      "lineNbr": 96,
      "author": {
        "id": 1065256
      },
      "writtenOn": "2022-03-04T09:36:29Z",
      "side": 1,
      "message": "Yes, the reference given to the constructor is the same, but it is directly used within the constructor to extract values of the Gerrit config. Thus, I have to call the constructor again, if the configuration changes.\nThe current PatchSet was created after Wendy\u0027s comment to reduce the code duplication as she asked for.",
      "parentUuid": "4aa3deb0_4bd677db",
      "revId": "ae01681cd21bf606f1570761543c813f2794f86f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d2ed4091_6665cfa9",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/avatars/external/ExternalUrlAvatarProviderTest.java",
        "patchSetId": 1
      },
      "lineNbr": 96,
      "author": {
        "id": 1003873
      },
      "writtenOn": "2022-03-04T09:39:53Z",
      "side": 1,
      "message": "My previous statement are not completely correct because the ExternalUrlAvatarProvider extracts all the info from the given PluginConfig already in its constructor. Any change in the cfg mock, after the construction are therefore not applied.",
      "parentUuid": "4aa3deb0_4bd677db",
      "revId": "ae01681cd21bf606f1570761543c813f2794f86f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}